<!-- NOT LOGGED IN -->
@if (!(clerk.user$ | async)) {
  <div class="auth-container">
    <h2>Sign in to SR&ED AI</h2>
    <clerk-sign-in></clerk-sign-in>
  </div>
}

<!-- LOGGED IN -->
@if (clerk.user$ | async; as user) {
  <div class="dashboard">

    <!-- HEADER -->
    <header class="header">
      <div class="user-info" [routerLink]="['/get-reports']">
        <img [src]="user.imageUrl" />

        <div class="details">
          <div class="name">{{ user.firstName || user.username }}</div>
          <div class="email">{{ user.primaryEmailAddress?.emailAddress }}</div>
        </div>
      </div>

      <clerk-user-button></clerk-user-button>
    </header>

    <!-- TITLE -->
    <section class="section-head">
      <h3>Connect your tools</h3>
      <p>We use integrations to gather engineering activity for SR&ED reporting.</p>
    </section>

    <!-- INTEGRATIONS -->
    <div class="integration-list">

      <button class="integration github" (click)="connectGitHub()">
        <div class="title">ğŸ”— Connect GitHub</div>
        <div class="subtitle">Read repositories, commits & PR history</div>
      </button>

      <button class="integration jira" (click)="connectJira()">
        <div class="title">ğŸ”— Connect Jira</div>
        <div class="subtitle">Read issues, sprints & engineering logs</div>
      </button>
    </div>

    <!-- LOAD REPOS -->
    <button class="load-repos" (click)="loadRepos()">
      ğŸ“ Load My GitHub Repositories
    </button>

    <router-outlet></router-outlet>
  </div>
}
